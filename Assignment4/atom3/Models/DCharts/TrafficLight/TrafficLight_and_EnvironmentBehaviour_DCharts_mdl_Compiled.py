# Python source code generated by SCC (StateChart Compiler) 0.3, written by Thomas Feng
#   Source: C:/Users/ujean/Downloads/src/Models/DCharts/TrafficLight\TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.des
#   Date:   February 16, 2010
#   Time:   23:13:34


# Header Section -- definition and module importation used by the following parts
import sys
import copy
import time
import string
import thread
import threading
import time


class State:

  def __init__(self):

    self.StateID=-1
    self.Next=None

  def copy(self):

    s=State()
    s.StateID=self.StateID
    if self.Next!=None:
      s.Next=self.Next.copy()
    return s


class History:

  def __init__(self):

    self.States=None
    self.Times=None
    self.Submodel=None


class EventList:

  def __init__(self):

    self.Event=None
    self.Next=None

  def Append(self, e):

    if isinstance(e, str):
      el=EventList()
      el.Event=e
      cur=this
      while cur.Next!=None and cur.Event!=e:
        cur=cur.Next
      if cur.Event!=e:
        cur.Next=el

    elif isinstance(e, EventList):
      el=e
      while el!=None:
        self.Append(el.Event)
        el=el.Next


class StringList:

  def __init__(self, str=""):

    self.str=str
    self.Next=None

  def sort(self):

    if self.Next!=None:
      self.Next=self.Next.sort()
      if self.Next.str<self.str:
        first=self.Next
        prev=self.Next
        next=self.Next.Next
        while next!=None and next.str<self.str:
          prev=next
          next=next.Next
        self.Next=next
        prev.Next=self
        return first
    return self


class IntList:

  def __init__(self, int=0):

    self.int=int
    self.Next=None


class Hierarchy:

  def __init__(self):

    self.StateName=None
    self.PathName=None
    self.StateNum=-1
    self.Level=-1
    self.Next=None


class StateMachine:

  def eventStr2Int(self, event):

    return -1

  def getCurrentStateList(self):

    return None

  def getCurrentState(self):

    return "[]"

  def getEnabledEvents(self):

    return None

  def initModel(self, run_initializer=1, run_enter_actions=1):

    pass

  def isInState(self, s, check_substate=1, use_backup=1):

    return 0

  def getParentState(self, state):

    return -1

  def isHistoryState(self, state):

    return 0

  def isLeafState(self, state):

    return 0

  def getHierarchy(self, start_level=0, state_prefix=None):

    return None

  def topLevelHistory(self):

    pass

  def recordAllEnteredStates(self):

    pass

  def runAllEnterActions(self):

    pass

  def runInitializer(self):

    pass

  def runFinalizer(self):

    pass

  def runInteractor(self):

    pass

  def state(self):

    pass

  def handleEvent(self, se, params=[], cond=None, scheduler=None):

    return 0

  def event(self, e, params=[], cond=None, scheduler=None):

    pass


def startsWith(s, ss):

  return ss==None or (s!=None and len(s)>=len(ss) and s[0:len(ss)]==ss)


# used only when --ext is set
from code import InteractiveInterpreter


# Main Class -- the top level model that is executed from the command line
class TrafficLight_and_EnvironmentBehaviour_DCharts_mdl(StateMachine):

  # Constants for this model
  StateNum=23
  EventNames=["CROSSWALK",
              "ON-OFF",
              "POLICE",
              "QUIT",
              "__INTERNAL_0_TIME_0",
              "__INTERNAL_0_TIME_1",
              "__INTERNAL_0_TIME_10",
              "__INTERNAL_0_TIME_11",
              "__INTERNAL_0_TIME_12",
              "__INTERNAL_0_TIME_13",
              "__INTERNAL_0_TIME_2",
              "__INTERNAL_0_TIME_3",
              "__INTERNAL_0_TIME_4",
              "__INTERNAL_0_TIME_5",
              "__INTERNAL_0_TIME_6",
              "__INTERNAL_0_TIME_7",
              "__INTERNAL_0_TIME_8",
              "__INTERNAL_0_TIME_9" 
             ]
  StateNames=["TrafficLight",
              "TrafficLight.DEAD",
              "TrafficLight.OFF",
              "TrafficLight.ON",
              "TrafficLight.ON.FLASHING",
              "TrafficLight.ON.FLASHING.YELLOW_OFF",
              "TrafficLight.ON.FLASHING.YELLOW_ON",
              "TrafficLight.ON.NORMAL",
              "TrafficLight.ON.NORMAL.GREEN",
              "TrafficLight.ON.NORMAL.RED",
              "TrafficLight.ON.NORMAL.RED.GREEN_SOON",
              "TrafficLight.ON.NORMAL.RED.RED_WAIT",
              "TrafficLight.ON.NORMAL.YELLOW",
              "pedestrian",
              "pedestrian.idle",
              "pedestrian.pressed",
              "police",
              "police.u1",
              "police.u2",
              "police.u3",
              "police.u4",
              "police.u5",
              "police.u6" 
             ]
  ParentTable=[-1,  # TrafficLight -- parent (None)
               0,  # TrafficLight.DEAD -- parent TrafficLight
               0,  # TrafficLight.OFF -- parent TrafficLight
               0,  # TrafficLight.ON -- parent TrafficLight
               3,  # TrafficLight.ON.FLASHING -- parent TrafficLight.ON
               4,  # TrafficLight.ON.FLASHING.YELLOW_OFF -- parent TrafficLight.ON.FLASHING
               4,  # TrafficLight.ON.FLASHING.YELLOW_ON -- parent TrafficLight.ON.FLASHING
               3,  # TrafficLight.ON.NORMAL -- parent TrafficLight.ON
               7,  # TrafficLight.ON.NORMAL.GREEN -- parent TrafficLight.ON.NORMAL
               7,  # TrafficLight.ON.NORMAL.RED -- parent TrafficLight.ON.NORMAL
               9,  # TrafficLight.ON.NORMAL.RED.GREEN_SOON -- parent TrafficLight.ON.NORMAL.RED
               9,  # TrafficLight.ON.NORMAL.RED.RED_WAIT -- parent TrafficLight.ON.NORMAL.RED
               7,  # TrafficLight.ON.NORMAL.YELLOW -- parent TrafficLight.ON.NORMAL
               -1,  # pedestrian -- parent (None)
               13,  # pedestrian.idle -- parent pedestrian
               13,  # pedestrian.pressed -- parent pedestrian
               -1,  # police -- parent (None)
               16,  # police.u1 -- parent police
               16,  # police.u2 -- parent police
               16,  # police.u3 -- parent police
               16,  # police.u4 -- parent police
               16,  # police.u5 -- parent police
               16   # police.u6 -- parent police
              ]
  HistoryStateTable=[0,
                     0,
                     0,
                     2,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0,
                     0 
                    ]
  LeafStateTable=[None,
                  "TrafficLight.DEAD",
                  "TrafficLight.OFF",
                  None,
                  None,
                  "TrafficLight.ON.FLASHING.YELLOW_OFF",
                  "TrafficLight.ON.FLASHING.YELLOW_ON",
                  None,
                  "TrafficLight.ON.NORMAL.GREEN",
                  None,
                  "TrafficLight.ON.NORMAL.RED.GREEN_SOON",
                  "TrafficLight.ON.NORMAL.RED.RED_WAIT",
                  "TrafficLight.ON.NORMAL.YELLOW",
                  None,
                  "pedestrian.idle",
                  "pedestrian.pressed",
                  None,
                  "police.u1",
                  "police.u2",
                  "police.u3",
                  "police.u4",
                  "police.u5",
                  "police.u6" 
                 ]
  OrthogonalInBetween=[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] 
                      ]
  OrthogonalTable=[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1],
                   [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1],
                   [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1],
                   [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0],
                   [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0],
                   [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0],
                   [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0],
                   [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0],
                   [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0],
                   [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0] 
                  ]
  IntervalTable=[None,
                 None,
                 None,
                 None,
                 "6",
                 "5",
                 "3",
                 "10",
                 "5",
                 "0",
                 "2",
                 "2",
                 "0.5",
                 "0.5",
                 "20",
                 "20",
                 "5",
                 "1" 
                ]
  RescheduleTable=[-1,
                   -1,
                   -1,
                   -1,
                   11,
                   8,
                   21,
                   22,
                   14,
                   15,
                   12,
                   10,
                   5,
                   6,
                   17,
                   18,
                   19,
                   20 
                  ]
  Hierarchy=[[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state TrafficLight
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state TrafficLight.DEAD
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state TrafficLight.OFF
             [0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state TrafficLight.ON
             [0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state TrafficLight.ON.FLASHING
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state TrafficLight.ON.FLASHING.YELLOW_OFF
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state TrafficLight.ON.FLASHING.YELLOW_ON
             [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state TrafficLight.ON.NORMAL
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state TrafficLight.ON.NORMAL.GREEN
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state TrafficLight.ON.NORMAL.RED
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state TrafficLight.ON.NORMAL.RED.GREEN_SOON
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state TrafficLight.ON.NORMAL.RED.RED_WAIT
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state TrafficLight.ON.NORMAL.YELLOW
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0],  # substates of state pedestrian
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state pedestrian.idle
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state pedestrian.pressed
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1],  # substates of state police
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state police.u1
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state police.u2
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state police.u3
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state police.u4
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  # substates of state police.u5
             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]   # substates of state police.u6
            ]
  CommonStateTable=[[-1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                    [0, 0, 0, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                    [0, 0, 0, 3, 3, 4, 4, 3, 3, 3, 3, 3, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                    [0, 0, 0, 3, 4, 4, 4, 3, 3, 3, 3, 3, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                    [0, 0, 0, 3, 4, 4, 4, 3, 3, 3, 3, 3, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                    [0, 0, 0, 3, 3, 3, 3, 3, 7, 7, 7, 7, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                    [0, 0, 0, 3, 3, 3, 3, 7, 7, 7, 7, 7, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                    [0, 0, 0, 3, 3, 3, 3, 7, 7, 7, 9, 9, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                    [0, 0, 0, 3, 3, 3, 3, 7, 7, 9, 9, 9, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                    [0, 0, 0, 3, 3, 3, 3, 7, 7, 9, 9, 9, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                    [0, 0, 0, 3, 3, 3, 3, 7, 7, 7, 7, 7, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 13, 13, -1, -1, -1, -1, -1, -1, -1],
                    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 13, 13, 13, -1, -1, -1, -1, -1, -1, -1],
                    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 13, 13, 13, -1, -1, -1, -1, -1, -1, -1],
                    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 16, 16, 16, 16, 16, 16],
                    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 16, 16, 16, 16, 16, 16, 16],
                    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 16, 16, 16, 16, 16, 16, 16],
                    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 16, 16, 16, 16, 16, 16, 16],
                    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 16, 16, 16, 16, 16, 16, 16],
                    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 16, 16, 16, 16, 16, 16, 16],
                    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 16, 16, 16, 16, 16, 16, 16] 
                   ]
  Description=None

  ##Lock=thread.allocate_lock()
  CurrentModel=None

  def __init__(self, Interpreter=None, Parent=None, OldInstance=None):

    # Variables
    self.Parent=Parent
    self.HistoryCount=0
    self.state=None
    self.BackState=None
    if OldInstance!=None:
      self.Submodels=OldInstance.Submodels
    else:
      self.Submodels=[]
      for i in range(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum):
        self.Submodels.append(None)
    self.history=[]
    for i in range(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum):
      self.history.append(None)

    # Constructor
    for i in range(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum):
      self.history[i]=History()
      self.history[i].States=[]
      self.history[i].Times=[]
      for j in range(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum):
        self.history[i].States.append(-1)
        self.history[i].Times.append(-1)

    self.TimedTransitions=[] # used only when --ext is set
    for i in range(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum):
      self.TimedTransitions.append(None)

    self.clearEnteredStates()
    self.HasInteractor=0

    # Interpreter of action code
    if self.Parent==None:  # Top-level model
      if Interpreter:
        self.DefaultInterpreter=Interpreter
      else:
        self.DefaultInterpreter=InteractiveInterpreter()
      self.setupInterpreter()

      ##self.EventsCond=threading.Condition()
      ##self.SchedulerCond=threading.Condition()
      self.Schedules=[]
      self.PendingEvents=None
      self.PendingEventsTail=None
    else:
      self.DefaultInterpreter=Interpreter
    self.Started=0
    self.Stopped=0

    self.description=TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.Description

  # Methods
  def isParent(self, sp, sc):

    return sc>=0 and (sp<0 or TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.Hierarchy[sp][sc])

  def isInState(self, s, check_substate=1, use_backup=1):

    if isinstance(s, int):
      if use_backup:
        st=self.BackState
      else:
        st=self.state
      while st!=None:
        if st.StateID==s or (check_substate and self.isParent(s, st.StateID)):
          return 1
        else:
          st=st.Next
      return 0

    elif isinstance(s, str):
      i=0
      while i<TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum:
        if s==TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNames[i]:
          return self.isInState(i, check_substate, use_backup)
        i=i+1
      i=0
      while i<TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum:
        stname=TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNames[i]
        if self.Submodels[i]!=None and startsWith(s, stname+"."):
          pos=len(stname)+1
          SubmodelState=s[pos:]
          return self.isInState(i, 0, use_backup) and self.Submodels[i].isInState(SubmodelState, check_substate, use_backup);
        i=i+1
      return 0

    else:
      return 0

  class main_callable:
    def __call__(self, argv):
      model=TrafficLight_and_EnvironmentBehaviour_DCharts_mdl()
      cmd=""
      model.initModel()
      if model.HasInteractor:
        model.runInteractor()
      else:
        ##cond=thread.allocate_lock()
        while cmd!="exit":
          sys.__stdout__.write(model.getCurrentState()+" > ")
          cmd=string.strip(sys.__stdin__.readline())
          if cmd=="exit":
            break
          if not model.Stopped:
            ##cond.acquire()
            ##model.event(cmd, [], cond)
            model.event(cmd, [])
            ##cond.acquire()
            ##cond.release()
      model.runFinalizer()
  main=main_callable()

  def initModel(self, run_initializer=1, run_enter_actions=1, TkInstance = None ):

    self.clearEnteredStates()
    if self.Parent==None and TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.Description!=None:
      sys.__stdout__.write(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.Description+"\n")
    self.addInState(11) # init state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
    self.recordEnteredState(0)
    self.recordEnteredState(3)
    self.recordEnteredState(7)
    self.recordEnteredState(9)
    self.recordEnteredState(11)
    self.addInState(14) # init state "pedestrian.idle"
    self.recordEnteredState(13)
    self.recordEnteredState(14)
    self.addInState(17) # init state "police.u1"
    self.recordEnteredState(16)
    self.recordEnteredState(17)
    if run_initializer:
      self.runInitializer()
    if not self.HasInteractor:
      self.start(None, run_enter_actions, TkInstance )

  def applyMask(self, mask, dest):

    i=0
    while i<TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum:
      dest[i]=dest[i] and mask[i]
      i=i+1

  def handleEvent(self, se, params=[], cond=None, scheduler=None):

    if not self.Started:
      if cond:
        cond.release()
      return 0
    self.params=params
    handled=0
    table=[]
    i=0
    while i<TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum:
      table.append(1)
      i=i+1
    if self.state:
      self.BackState=self.state.copy()
    else:
      self.BackState=None
    e=self.eventStr2Int(se)
    if e==0: # event "CROSSWALK"
      if table[11] and self.isInState(11) and self.testCondition(0):
        if (scheduler==self or scheduler==None) and table[11]:
          self.runExitActionsForStates(9)
	  self.clearEnteredStates()
          self.changeState(11, 10)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[11], table)
          handled=1
    elif e==1: # event "ON-OFF"
      if table[2] and self.isInState(2) and self.testCondition(1):
        if (scheduler==self or scheduler==None) and table[2]:
          self.runExitActionsForStates(0)
	  self.clearEnteredStates()
          self.changeState(2, 3, 1)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[2], table)
          handled=1
      if table[3] and self.isInState(3) and self.testCondition(2):
        if (scheduler==self or scheduler==None) and table[3]:
          self.runExitActionsForStates(0)
	  self.clearEnteredStates()
          self.changeState(3, 2)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[3], table)
          handled=1
    elif e==2: # event "POLICE"
      if table[4] and self.isInState(4) and self.testCondition(3):
        if (scheduler==self or scheduler==None) and table[4]:
          self.runExitActionsForStates(3)
	  self.clearEnteredStates()
          self.changeState(4, 7)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[4], table)
          handled=1
      if table[7] and self.isInState(7) and self.testCondition(4):
        if (scheduler==self or scheduler==None) and table[7]:
          self.runExitActionsForStates(3)
	  self.clearEnteredStates()
          self.changeState(7, 4)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[7], table)
          handled=1
    elif e==3: # event "QUIT"
      if table[3] and self.isInState(3) and self.testCondition(5):
        if (scheduler==self or scheduler==None) and table[3]:
          self.runExitActionsForStates(0)
	  self.clearEnteredStates()
          self.changeState(3, 1)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[3], table)
          handled=1
    elif e==4: # event "__INTERNAL_0_TIME_0"
      if table[11] and self.isInState(11) and self.testCondition(6):
        if (scheduler==self or scheduler==None) and table[11]:
          self.runExitActionsForStates(9)
	  self.clearEnteredStates()
          self.changeState(11, 10)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[11], table)
          handled=1
    elif e==5: # event "__INTERNAL_0_TIME_1"
      if table[8] and self.isInState(8) and self.testCondition(7):
        if (scheduler==self or scheduler==None) and table[8]:
          self.runExitActionsForStates(7)
	  self.clearEnteredStates()
          self.changeState(8, 12)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[8], table)
          handled=1
    elif e==6: # event "__INTERNAL_0_TIME_10"
      if table[21] and self.isInState(21) and self.testCondition(8):
        if (scheduler==self or scheduler==None) and table[21]:
          self.runActionCode(2) # output action(s)
          self.runExitActionsForStates(16)
	  self.clearEnteredStates()
          self.changeState(21, 22)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[21], table)
          handled=1
    elif e==7: # event "__INTERNAL_0_TIME_11"
      if table[22] and self.isInState(22) and self.testCondition(9):
        if (scheduler==self or scheduler==None) and table[22]:
          self.runExitActionsForStates(16)
	  self.clearEnteredStates()
          self.changeState(22, 17)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[22], table)
          handled=1
    elif e==8: # event "__INTERNAL_0_TIME_12"
      if table[14] and self.isInState(14) and self.testCondition(10):
        if (scheduler==self or scheduler==None) and table[14]:
          self.runActionCode(3) # output action(s)
          self.runExitActionsForStates(13)
	  self.clearEnteredStates()
          self.changeState(14, 15)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[14], table)
          handled=1
    elif e==9: # event "__INTERNAL_0_TIME_13"
      if table[15] and self.isInState(15) and self.testCondition(11):
        if (scheduler==self or scheduler==None) and table[15]:
          self.runActionCode(4) # output action(s)
          self.runExitActionsForStates(13)
	  self.clearEnteredStates()
          self.changeState(15, 14)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[15], table)
          handled=1
    elif e==10: # event "__INTERNAL_0_TIME_2"
      if table[12] and self.isInState(12) and self.testCondition(12):
        if (scheduler==self or scheduler==None) and table[12]:
          self.runExitActionsForStates(7)
	  self.clearEnteredStates()
          self.changeState(12, 9)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[12], table)
          handled=1
    elif e==11: # event "__INTERNAL_0_TIME_3"
      if table[10] and self.isInState(10) and self.testCondition(13):
        if (scheduler==self or scheduler==None) and table[10]:
          self.runExitActionsForStates(7)
	  self.clearEnteredStates()
          self.changeState(10, 8)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[10], table)
          handled=1
    elif e==12: # event "__INTERNAL_0_TIME_4"
      if table[5] and self.isInState(5) and self.testCondition(14):
        if (scheduler==self or scheduler==None) and table[5]:
          self.runExitActionsForStates(4)
	  self.clearEnteredStates()
          self.changeState(5, 6)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[5], table)
          handled=1
    elif e==13: # event "__INTERNAL_0_TIME_5"
      if table[6] and self.isInState(6) and self.testCondition(15):
        if (scheduler==self or scheduler==None) and table[6]:
          self.runExitActionsForStates(4)
	  self.clearEnteredStates()
          self.changeState(6, 5)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[6], table)
          handled=1
    elif e==14: # event "__INTERNAL_0_TIME_6"
      if table[17] and self.isInState(17) and self.testCondition(16):
        if (scheduler==self or scheduler==None) and table[17]:
          self.runActionCode(5) # output action(s)
          self.runExitActionsForStates(16)
	  self.clearEnteredStates()
          self.changeState(17, 18)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[17], table)
          handled=1
    elif e==15: # event "__INTERNAL_0_TIME_7"
      if table[18] and self.isInState(18) and self.testCondition(17):
        if (scheduler==self or scheduler==None) and table[18]:
          self.runActionCode(6) # output action(s)
          self.runExitActionsForStates(16)
	  self.clearEnteredStates()
          self.changeState(18, 19)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[18], table)
          handled=1
    elif e==16: # event "__INTERNAL_0_TIME_8"
      if table[19] and self.isInState(19) and self.testCondition(18):
        if (scheduler==self or scheduler==None) and table[19]:
          self.runActionCode(7) # output action(s)
          self.runExitActionsForStates(16)
	  self.clearEnteredStates()
          self.changeState(19, 20)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[19], table)
          handled=1
    elif e==17: # event "__INTERNAL_0_TIME_9"
      if table[20] and self.isInState(20) and self.testCondition(19):
        if (scheduler==self or scheduler==None) and table[20]:
          self.runActionCode(8) # output action(s)
          self.runExitActionsForStates(16)
	  self.clearEnteredStates()
          self.changeState(20, 21)
          self.runEnterActionsForStates(self.StatesEntered, 1)
          self.applyMask(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalTable[20], table)
          handled=1
    if cond and self.Parent==None:  # Top-level model
      cond.release()
    if not handled and e>=0 and (scheduler==self or scheduler==None) and TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.RescheduleTable[e]>=0:
      self.addSchedule(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.RescheduleTable[e], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[e], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[e], scheduler)
    return handled

  def forceIntoState(self, s):

    changed=0
    s2=self.state
    while s2!=None:
      HasCommonParent=0
      for i in range(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum):
        if self.isParent(i, s2.StateID) and self.isParent(i, s):
          HasCommonParent=1
          if not self.hasOrthogonalStateInBetween(i, s2.StateID):
            self.changeState(s2.StateID, s)
            changed=1
      if not HasCommonParent:
        self.changeState(s2.StateID, s)
        changed=1
      s2=s2.Next
    if not changed:
      self.addInState(s)

  def changeState(self, s1, s2, check_history=0, top_level=0):

    # t1=common(s1, s2)
    t1=TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.CommonStateTable[s1][s2]
    self.recordHistory(t1)
    if t1>=0:
      self.removeOutStates(t1)
    else:
      self.state=None
    # t2=history(s2)
    t2=TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.HistoryStateTable[s2]
    if t2==0: # no history
      self.generateStates(t1, s2)
    elif t2==1: # normal history
      if not check_history:
        self.generateStates(t1, s2)
      elif self.hasHistoryRecorded(s2) and self.Submodels[s2]==None:
        self.generateStates(t1, self.history[s2].States[s2])
      else:
        self.generateStates(t1, s2, 1)
    elif t2==2: # deep history
      if check_history and self.hasHistoryRecorded(s2):
        if self.Submodels[s2]:
          self.recordEnteredState(s2, 1, 1, t1)
          self.addInState(s2)
        else:
          for i in range(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum):
            hs=self.history[s2].States[i]
            if hs>=0 and self.isLeafState(hs):
              self.recordEnteredState(hs, 1, 1, t1)
              self.addInState(hs)
      else:
        self.generateStates(t1, s2)

  def addInState(self, s):

    if not self.isInState(s, 1, 0):
      st=State()
      st.StateID=s
      st.Next=self.state
      self.state=st
      return 1
    else:
      return 0

  def generateStates(self, common, dest, history_type=0):

    if common==-1:
      if dest==0:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==1:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(1):
              self.recordEnteredState(1)
              self.addInState(1)  # move into leaf state "TrafficLight.DEAD"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==2:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(2):
              self.recordEnteredState(2)
              self.addInState(2)  # move into leaf state "TrafficLight.OFF"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==3:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==4:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(4):
                self.recordEnteredState(4)
                if history_type!=2 or self.check_history(6):
                  self.recordEnteredState(6)
                  self.addInState(6)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_ON"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==5:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(4):
                self.recordEnteredState(4)
                if history_type!=2 or self.check_history(5):
                  self.recordEnteredState(5)
                  self.addInState(5)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_OFF"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==6:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(4):
                self.recordEnteredState(4)
                if history_type!=2 or self.check_history(6):
                  self.recordEnteredState(6)
                  self.addInState(6)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_ON"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==7:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==8:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(8):
                  self.recordEnteredState(8)
                  self.addInState(8)  # move into leaf state "TrafficLight.ON.NORMAL.GREEN"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==9:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==10:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(10):
                    self.recordEnteredState(10)
                    self.addInState(10)  # move into leaf state "TrafficLight.ON.NORMAL.RED.GREEN_SOON"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==11:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==12:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(12):
                  self.recordEnteredState(12)
                  self.addInState(12)  # move into leaf state "TrafficLight.ON.NORMAL.YELLOW"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==13:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==14:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==15:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(15):
              self.recordEnteredState(15)
              self.addInState(15)  # move into leaf state "pedestrian.pressed"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==16:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==17:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(17):
              self.recordEnteredState(17)
              self.addInState(17)  # move into leaf state "police.u1"
      elif dest==18:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(18):
              self.recordEnteredState(18)
              self.addInState(18)  # move into leaf state "police.u2"
      elif dest==19:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(19):
              self.recordEnteredState(19)
              self.addInState(19)  # move into leaf state "police.u3"
      elif dest==20:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(20):
              self.recordEnteredState(20)
              self.addInState(20)  # move into leaf state "police.u4"
      elif dest==21:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(21):
              self.recordEnteredState(21)
              self.addInState(21)  # move into leaf state "police.u5"
      elif dest==22:
        if history_type!=2 or self.check_history(-1):
          if history_type!=2 or self.check_history(0):
            self.recordEnteredState(0)
            if history_type!=2 or self.check_history(3):
              self.recordEnteredState(3)
              if history_type!=2 or self.check_history(7):
                self.recordEnteredState(7)
                if history_type!=2 or self.check_history(9):
                  self.recordEnteredState(9)
                  if history_type!=2 or self.check_history(11):
                    self.recordEnteredState(11)
                    self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
          if history_type!=2 or self.check_history(13):
            self.recordEnteredState(13)
            if history_type!=2 or self.check_history(14):
              self.recordEnteredState(14)
              self.addInState(14)  # move into leaf state "pedestrian.idle"
          if history_type!=2 or self.check_history(16):
            self.recordEnteredState(16)
            if history_type!=2 or self.check_history(22):
              self.recordEnteredState(22)
              self.addInState(22)  # move into leaf state "police.u6"
    elif common==0:
      if dest==0:
        if history_type!=2 or self.check_history(0):
          if history_type!=2 or self.check_history(3):
            self.recordEnteredState(3)
            if history_type!=2 or self.check_history(7):
              self.recordEnteredState(7)
              if history_type!=2 or self.check_history(9):
                self.recordEnteredState(9)
                if history_type!=2 or self.check_history(11):
                  self.recordEnteredState(11)
                  self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      elif dest==1:
        if history_type!=2 or self.check_history(0):
          if history_type!=2 or self.check_history(1):
            self.recordEnteredState(1)
            self.addInState(1)  # move into leaf state "TrafficLight.DEAD"
      elif dest==2:
        if history_type!=2 or self.check_history(0):
          if history_type!=2 or self.check_history(2):
            self.recordEnteredState(2)
            self.addInState(2)  # move into leaf state "TrafficLight.OFF"
      elif dest==3:
        if history_type!=2 or self.check_history(0):
          if history_type!=2 or self.check_history(3):
            self.recordEnteredState(3)
            if history_type!=2 or self.check_history(7):
              self.recordEnteredState(7)
              if history_type!=2 or self.check_history(9):
                self.recordEnteredState(9)
                if history_type!=2 or self.check_history(11):
                  self.recordEnteredState(11)
                  self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      elif dest==4:
        if history_type!=2 or self.check_history(0):
          if history_type!=2 or self.check_history(3):
            self.recordEnteredState(3)
            if history_type!=2 or self.check_history(4):
              self.recordEnteredState(4)
              if history_type!=2 or self.check_history(6):
                self.recordEnteredState(6)
                self.addInState(6)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_ON"
      elif dest==5:
        if history_type!=2 or self.check_history(0):
          if history_type!=2 or self.check_history(3):
            self.recordEnteredState(3)
            if history_type!=2 or self.check_history(4):
              self.recordEnteredState(4)
              if history_type!=2 or self.check_history(5):
                self.recordEnteredState(5)
                self.addInState(5)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_OFF"
      elif dest==6:
        if history_type!=2 or self.check_history(0):
          if history_type!=2 or self.check_history(3):
            self.recordEnteredState(3)
            if history_type!=2 or self.check_history(4):
              self.recordEnteredState(4)
              if history_type!=2 or self.check_history(6):
                self.recordEnteredState(6)
                self.addInState(6)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_ON"
      elif dest==7:
        if history_type!=2 or self.check_history(0):
          if history_type!=2 or self.check_history(3):
            self.recordEnteredState(3)
            if history_type!=2 or self.check_history(7):
              self.recordEnteredState(7)
              if history_type!=2 or self.check_history(9):
                self.recordEnteredState(9)
                if history_type!=2 or self.check_history(11):
                  self.recordEnteredState(11)
                  self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      elif dest==8:
        if history_type!=2 or self.check_history(0):
          if history_type!=2 or self.check_history(3):
            self.recordEnteredState(3)
            if history_type!=2 or self.check_history(7):
              self.recordEnteredState(7)
              if history_type!=2 or self.check_history(8):
                self.recordEnteredState(8)
                self.addInState(8)  # move into leaf state "TrafficLight.ON.NORMAL.GREEN"
      elif dest==9:
        if history_type!=2 or self.check_history(0):
          if history_type!=2 or self.check_history(3):
            self.recordEnteredState(3)
            if history_type!=2 or self.check_history(7):
              self.recordEnteredState(7)
              if history_type!=2 or self.check_history(9):
                self.recordEnteredState(9)
                if history_type!=2 or self.check_history(11):
                  self.recordEnteredState(11)
                  self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      elif dest==10:
        if history_type!=2 or self.check_history(0):
          if history_type!=2 or self.check_history(3):
            self.recordEnteredState(3)
            if history_type!=2 or self.check_history(7):
              self.recordEnteredState(7)
              if history_type!=2 or self.check_history(9):
                self.recordEnteredState(9)
                if history_type!=2 or self.check_history(10):
                  self.recordEnteredState(10)
                  self.addInState(10)  # move into leaf state "TrafficLight.ON.NORMAL.RED.GREEN_SOON"
      elif dest==11:
        if history_type!=2 or self.check_history(0):
          if history_type!=2 or self.check_history(3):
            self.recordEnteredState(3)
            if history_type!=2 or self.check_history(7):
              self.recordEnteredState(7)
              if history_type!=2 or self.check_history(9):
                self.recordEnteredState(9)
                if history_type!=2 or self.check_history(11):
                  self.recordEnteredState(11)
                  self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      elif dest==12:
        if history_type!=2 or self.check_history(0):
          if history_type!=2 or self.check_history(3):
            self.recordEnteredState(3)
            if history_type!=2 or self.check_history(7):
              self.recordEnteredState(7)
              if history_type!=2 or self.check_history(12):
                self.recordEnteredState(12)
                self.addInState(12)  # move into leaf state "TrafficLight.ON.NORMAL.YELLOW"
    elif common==1:
      if dest==1:
        if history_type!=2 or self.check_history(1):
          self.addInState(1)  # move into leaf state "TrafficLight.DEAD"
    elif common==2:
      if dest==2:
        if history_type!=2 or self.check_history(2):
          self.addInState(2)  # move into leaf state "TrafficLight.OFF"
    elif common==3:
      if dest==3:
        if history_type!=2 or self.check_history(3):
          if history_type!=2 or self.check_history(7):
            self.recordEnteredState(7)
            if history_type!=2 or self.check_history(9):
              self.recordEnteredState(9)
              if history_type!=2 or self.check_history(11):
                self.recordEnteredState(11)
                self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      elif dest==4:
        if history_type!=2 or self.check_history(3):
          if history_type!=2 or self.check_history(4):
            self.recordEnteredState(4)
            if history_type!=2 or self.check_history(6):
              self.recordEnteredState(6)
              self.addInState(6)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_ON"
      elif dest==5:
        if history_type!=2 or self.check_history(3):
          if history_type!=2 or self.check_history(4):
            self.recordEnteredState(4)
            if history_type!=2 or self.check_history(5):
              self.recordEnteredState(5)
              self.addInState(5)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_OFF"
      elif dest==6:
        if history_type!=2 or self.check_history(3):
          if history_type!=2 or self.check_history(4):
            self.recordEnteredState(4)
            if history_type!=2 or self.check_history(6):
              self.recordEnteredState(6)
              self.addInState(6)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_ON"
      elif dest==7:
        if history_type!=2 or self.check_history(3):
          if history_type!=2 or self.check_history(7):
            self.recordEnteredState(7)
            if history_type!=2 or self.check_history(9):
              self.recordEnteredState(9)
              if history_type!=2 or self.check_history(11):
                self.recordEnteredState(11)
                self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      elif dest==8:
        if history_type!=2 or self.check_history(3):
          if history_type!=2 or self.check_history(7):
            self.recordEnteredState(7)
            if history_type!=2 or self.check_history(8):
              self.recordEnteredState(8)
              self.addInState(8)  # move into leaf state "TrafficLight.ON.NORMAL.GREEN"
      elif dest==9:
        if history_type!=2 or self.check_history(3):
          if history_type!=2 or self.check_history(7):
            self.recordEnteredState(7)
            if history_type!=2 or self.check_history(9):
              self.recordEnteredState(9)
              if history_type!=2 or self.check_history(11):
                self.recordEnteredState(11)
                self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      elif dest==10:
        if history_type!=2 or self.check_history(3):
          if history_type!=2 or self.check_history(7):
            self.recordEnteredState(7)
            if history_type!=2 or self.check_history(9):
              self.recordEnteredState(9)
              if history_type!=2 or self.check_history(10):
                self.recordEnteredState(10)
                self.addInState(10)  # move into leaf state "TrafficLight.ON.NORMAL.RED.GREEN_SOON"
      elif dest==11:
        if history_type!=2 or self.check_history(3):
          if history_type!=2 or self.check_history(7):
            self.recordEnteredState(7)
            if history_type!=2 or self.check_history(9):
              self.recordEnteredState(9)
              if history_type!=2 or self.check_history(11):
                self.recordEnteredState(11)
                self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      elif dest==12:
        if history_type!=2 or self.check_history(3):
          if history_type!=2 or self.check_history(7):
            self.recordEnteredState(7)
            if history_type!=2 or self.check_history(12):
              self.recordEnteredState(12)
              self.addInState(12)  # move into leaf state "TrafficLight.ON.NORMAL.YELLOW"
    elif common==4:
      if dest==4:
        if history_type!=2 or self.check_history(4):
          if history_type!=2 or self.check_history(6):
            self.recordEnteredState(6)
            self.addInState(6)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_ON"
      elif dest==5:
        if history_type!=2 or self.check_history(4):
          if history_type!=2 or self.check_history(5):
            self.recordEnteredState(5)
            self.addInState(5)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_OFF"
      elif dest==6:
        if history_type!=2 or self.check_history(4):
          if history_type!=2 or self.check_history(6):
            self.recordEnteredState(6)
            self.addInState(6)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_ON"
    elif common==5:
      if dest==5:
        if history_type!=2 or self.check_history(5):
          self.addInState(5)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_OFF"
    elif common==6:
      if dest==6:
        if history_type!=2 or self.check_history(6):
          self.addInState(6)  # move into leaf state "TrafficLight.ON.FLASHING.YELLOW_ON"
    elif common==7:
      if dest==7:
        if history_type!=2 or self.check_history(7):
          if history_type!=2 or self.check_history(9):
            self.recordEnteredState(9)
            if history_type!=2 or self.check_history(11):
              self.recordEnteredState(11)
              self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      elif dest==8:
        if history_type!=2 or self.check_history(7):
          if history_type!=2 or self.check_history(8):
            self.recordEnteredState(8)
            self.addInState(8)  # move into leaf state "TrafficLight.ON.NORMAL.GREEN"
      elif dest==9:
        if history_type!=2 or self.check_history(7):
          if history_type!=2 or self.check_history(9):
            self.recordEnteredState(9)
            if history_type!=2 or self.check_history(11):
              self.recordEnteredState(11)
              self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      elif dest==10:
        if history_type!=2 or self.check_history(7):
          if history_type!=2 or self.check_history(9):
            self.recordEnteredState(9)
            if history_type!=2 or self.check_history(10):
              self.recordEnteredState(10)
              self.addInState(10)  # move into leaf state "TrafficLight.ON.NORMAL.RED.GREEN_SOON"
      elif dest==11:
        if history_type!=2 or self.check_history(7):
          if history_type!=2 or self.check_history(9):
            self.recordEnteredState(9)
            if history_type!=2 or self.check_history(11):
              self.recordEnteredState(11)
              self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      elif dest==12:
        if history_type!=2 or self.check_history(7):
          if history_type!=2 or self.check_history(12):
            self.recordEnteredState(12)
            self.addInState(12)  # move into leaf state "TrafficLight.ON.NORMAL.YELLOW"
    elif common==8:
      if dest==8:
        if history_type!=2 or self.check_history(8):
          self.addInState(8)  # move into leaf state "TrafficLight.ON.NORMAL.GREEN"
    elif common==9:
      if dest==9:
        if history_type!=2 or self.check_history(9):
          if history_type!=2 or self.check_history(11):
            self.recordEnteredState(11)
            self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      elif dest==10:
        if history_type!=2 or self.check_history(9):
          if history_type!=2 or self.check_history(10):
            self.recordEnteredState(10)
            self.addInState(10)  # move into leaf state "TrafficLight.ON.NORMAL.RED.GREEN_SOON"
      elif dest==11:
        if history_type!=2 or self.check_history(9):
          if history_type!=2 or self.check_history(11):
            self.recordEnteredState(11)
            self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
    elif common==10:
      if dest==10:
        if history_type!=2 or self.check_history(10):
          self.addInState(10)  # move into leaf state "TrafficLight.ON.NORMAL.RED.GREEN_SOON"
    elif common==11:
      if dest==11:
        if history_type!=2 or self.check_history(11):
          self.addInState(11)  # move into leaf state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
    elif common==12:
      if dest==12:
        if history_type!=2 or self.check_history(12):
          self.addInState(12)  # move into leaf state "TrafficLight.ON.NORMAL.YELLOW"
    elif common==13:
      if dest==13:
        if history_type!=2 or self.check_history(13):
          if history_type!=2 or self.check_history(14):
            self.recordEnteredState(14)
            self.addInState(14)  # move into leaf state "pedestrian.idle"
      elif dest==14:
        if history_type!=2 or self.check_history(13):
          if history_type!=2 or self.check_history(14):
            self.recordEnteredState(14)
            self.addInState(14)  # move into leaf state "pedestrian.idle"
      elif dest==15:
        if history_type!=2 or self.check_history(13):
          if history_type!=2 or self.check_history(15):
            self.recordEnteredState(15)
            self.addInState(15)  # move into leaf state "pedestrian.pressed"
    elif common==14:
      if dest==14:
        if history_type!=2 or self.check_history(14):
          self.addInState(14)  # move into leaf state "pedestrian.idle"
    elif common==15:
      if dest==15:
        if history_type!=2 or self.check_history(15):
          self.addInState(15)  # move into leaf state "pedestrian.pressed"
    elif common==16:
      if dest==16:
        if history_type!=2 or self.check_history(16):
          if history_type!=2 or self.check_history(17):
            self.recordEnteredState(17)
            self.addInState(17)  # move into leaf state "police.u1"
      elif dest==17:
        if history_type!=2 or self.check_history(16):
          if history_type!=2 or self.check_history(17):
            self.recordEnteredState(17)
            self.addInState(17)  # move into leaf state "police.u1"
      elif dest==18:
        if history_type!=2 or self.check_history(16):
          if history_type!=2 or self.check_history(18):
            self.recordEnteredState(18)
            self.addInState(18)  # move into leaf state "police.u2"
      elif dest==19:
        if history_type!=2 or self.check_history(16):
          if history_type!=2 or self.check_history(19):
            self.recordEnteredState(19)
            self.addInState(19)  # move into leaf state "police.u3"
      elif dest==20:
        if history_type!=2 or self.check_history(16):
          if history_type!=2 or self.check_history(20):
            self.recordEnteredState(20)
            self.addInState(20)  # move into leaf state "police.u4"
      elif dest==21:
        if history_type!=2 or self.check_history(16):
          if history_type!=2 or self.check_history(21):
            self.recordEnteredState(21)
            self.addInState(21)  # move into leaf state "police.u5"
      elif dest==22:
        if history_type!=2 or self.check_history(16):
          if history_type!=2 or self.check_history(22):
            self.recordEnteredState(22)
            self.addInState(22)  # move into leaf state "police.u6"
    elif common==17:
      if dest==17:
        if history_type!=2 or self.check_history(17):
          self.addInState(17)  # move into leaf state "police.u1"
    elif common==18:
      if dest==18:
        if history_type!=2 or self.check_history(18):
          self.addInState(18)  # move into leaf state "police.u2"
    elif common==19:
      if dest==19:
        if history_type!=2 or self.check_history(19):
          self.addInState(19)  # move into leaf state "police.u3"
    elif common==20:
      if dest==20:
        if history_type!=2 or self.check_history(20):
          self.addInState(20)  # move into leaf state "police.u4"
    elif common==21:
      if dest==21:
        if history_type!=2 or self.check_history(21):
          self.addInState(21)  # move into leaf state "police.u5"
    elif common==22:
      if dest==22:
        if history_type!=2 or self.check_history(22):
          self.addInState(22)  # move into leaf state "police.u6"

  def removeOutStates(self, common_state):

    s=self.state
    prev=None
    while s!=None:
      if self.isParent(common_state, s.StateID):
        if prev==None:
          self.state=self.state.Next
        else:
          prev.Next=s.Next
      else:
        prev=s
      s=s.Next

  def eventStr2Int(self, event):

    for i in range(18):
      if event==TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[i]:
        return i
    return -1

  def stateInt2Str(self, state):

    if state==-1:
      return ""
    else:
      return TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNames[state]

  def getCurrentStateList(self):

    sl=StringList()
    slend=sl
    s=self.state
    while s!=None:
      sm=self.Submodels[s.StateID]
      curstate=self.stateInt2Str(s.StateID)
      if sm!=None:
        slend.Next=sm.getCurrentStateList()
        while slend.Next!=None:
          slend.Next.str=curstate+"."+slend.Next.str
          slend=slend.Next
      else:
        slend.Next=StringList(curstate)
        slend=slend.Next
      s=s.Next
    return sl.Next

  def getCurrentState(self, states=None):

    if states==None:
      states=self.getCurrentStateList()
      if states!=None:
        states=states.sort()
        strst="['%s'%s]" % (states.str, self.getCurrentState(states))
      else:
        strst="[]"
    else:
      if states.Next:
        strst=", '%s'%s" % (states.Next.str, self.getCurrentState(states.Next))
      else:
        strst=""
    return strst

  def getParentState(self, state):

    return TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.ParentTable[state]

  def getSubstates(self, state):

    substates=None
    if state==-1: # substates of ""
      # add substate "TrafficLight"
      st=IntList()
      st.int=0
      st.Next=substates
      substates=st
      # add substate "pedestrian"
      st=IntList()
      st.int=13
      st.Next=substates
      substates=st
      # add substate "police"
      st=IntList()
      st.int=16
      st.Next=substates
      substates=st
    elif state==0: # substates of "TrafficLight"
      # add substate "TrafficLight.DEAD"
      st=IntList()
      st.int=1
      st.Next=substates
      substates=st
      # add substate "TrafficLight.OFF"
      st=IntList()
      st.int=2
      st.Next=substates
      substates=st
      # add substate "TrafficLight.ON"
      st=IntList()
      st.int=3
      st.Next=substates
      substates=st
    elif state==1: # substates of "TrafficLight.DEAD"
      pass
    elif state==2: # substates of "TrafficLight.OFF"
      pass
    elif state==3: # substates of "TrafficLight.ON"
      # add substate "TrafficLight.ON.FLASHING"
      st=IntList()
      st.int=4
      st.Next=substates
      substates=st
      # add substate "TrafficLight.ON.NORMAL"
      st=IntList()
      st.int=7
      st.Next=substates
      substates=st
    elif state==4: # substates of "TrafficLight.ON.FLASHING"
      # add substate "TrafficLight.ON.FLASHING.YELLOW_OFF"
      st=IntList()
      st.int=5
      st.Next=substates
      substates=st
      # add substate "TrafficLight.ON.FLASHING.YELLOW_ON"
      st=IntList()
      st.int=6
      st.Next=substates
      substates=st
    elif state==5: # substates of "TrafficLight.ON.FLASHING.YELLOW_OFF"
      pass
    elif state==6: # substates of "TrafficLight.ON.FLASHING.YELLOW_ON"
      pass
    elif state==7: # substates of "TrafficLight.ON.NORMAL"
      # add substate "TrafficLight.ON.NORMAL.GREEN"
      st=IntList()
      st.int=8
      st.Next=substates
      substates=st
      # add substate "TrafficLight.ON.NORMAL.RED"
      st=IntList()
      st.int=9
      st.Next=substates
      substates=st
      # add substate "TrafficLight.ON.NORMAL.YELLOW"
      st=IntList()
      st.int=12
      st.Next=substates
      substates=st
    elif state==8: # substates of "TrafficLight.ON.NORMAL.GREEN"
      pass
    elif state==9: # substates of "TrafficLight.ON.NORMAL.RED"
      # add substate "TrafficLight.ON.NORMAL.RED.GREEN_SOON"
      st=IntList()
      st.int=10
      st.Next=substates
      substates=st
      # add substate "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      st=IntList()
      st.int=11
      st.Next=substates
      substates=st
    elif state==10: # substates of "TrafficLight.ON.NORMAL.RED.GREEN_SOON"
      pass
    elif state==11: # substates of "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      pass
    elif state==12: # substates of "TrafficLight.ON.NORMAL.YELLOW"
      pass
    elif state==13: # substates of "pedestrian"
      # add substate "pedestrian.idle"
      st=IntList()
      st.int=14
      st.Next=substates
      substates=st
      # add substate "pedestrian.pressed"
      st=IntList()
      st.int=15
      st.Next=substates
      substates=st
    elif state==14: # substates of "pedestrian.idle"
      pass
    elif state==15: # substates of "pedestrian.pressed"
      pass
    elif state==16: # substates of "police"
      # add substate "police.u1"
      st=IntList()
      st.int=17
      st.Next=substates
      substates=st
      # add substate "police.u2"
      st=IntList()
      st.int=18
      st.Next=substates
      substates=st
      # add substate "police.u3"
      st=IntList()
      st.int=19
      st.Next=substates
      substates=st
      # add substate "police.u4"
      st=IntList()
      st.int=20
      st.Next=substates
      substates=st
      # add substate "police.u5"
      st=IntList()
      st.int=21
      st.Next=substates
      substates=st
      # add substate "police.u6"
      st=IntList()
      st.int=22
      st.Next=substates
      substates=st
    elif state==17: # substates of "police.u1"
      pass
    elif state==18: # substates of "police.u2"
      pass
    elif state==19: # substates of "police.u3"
      pass
    elif state==20: # substates of "police.u4"
      pass
    elif state==21: # substates of "police.u5"
      pass
    elif state==22: # substates of "police.u6"
      pass
    return substates

  def isHistoryState(self, state):

    return TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.HistoryStateTable[state]>0

  def isLeafState(self, state):

    if isinstance(state, int):
      return TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.LeafStateTable[state]!=None

    elif isinstance(state, str):
      for i in range(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum):
        if TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.LeafStateTable[i]==None:
          continue
        if state==TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.LeafStateTable[i] and self.Submodels[i]==None:
          return 1
        elif startsWith(state, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.LeafStateTable[i]+".") and self.Submodels[i]!=None:
          SubmodelState=state[TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.LeafStateTable[i].length()+1:]
          return self.Submodels[i].isLeafState(SubmodelState)
    return 0

  def isHistoryUp2Date(self, state, time):

    for i in range(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum):
      if self.history[state].Times[i]>=time:
        return 1
    return 0

  def mergeHistory(self, state, states, times):

    max=-1
    for i in range(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum):
      if times[i]>max:
        max=times[i]
    if self.isHistoryUp2Date(state, max):
      for i in range(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum):
        if times[i]>self.history[state].Times[i]:
          self.history[state].States[i]=states[i]
          self.history[state].Times[i]=times[i]
    else:
      self.history[state].States=copy.copy(states)
      self.history[state].Times=copy.copy(times)

  def recordHistory(self, top_state):

    curtime=self.HistoryCount
    self.HistoryCount=self.HistoryCount+1
    s=self.state
    while s!=None:
      child=s.StateID
      states=[]
      times=[]
      for i in range(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum):
        states.append(-1)
        times.append(-1)
      states[child]=child
      times[child]=curtime
      if top_state<0 or self.isParent(top_state, child):
        parent=self.getParentState(child)
        if self.isHistoryState(child):
          self.history[child].Submodel=self.Submodels[child]
        while parent>=0 and times[parent]!=curtime:
          states[parent]=child
          times[parent]=curtime
          if self.isHistoryState(parent):
            self.mergeHistory(parent, states, times)
          if parent==top_state:
            break
          child=parent
          parent=self.getParentState(child)
      s=s.Next

  def hasHistoryRecorded(self, state):

    for i in range(TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.StateNum):
      if self.history[state].States[i]!=-1:
        return 1
      if self.Submodels[state]!=None:
        return 1
    return 0

  def hasOrthogonalStateInBetween(self, parent, leaf):

    return TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.OrthogonalInBetween[parent+1][leaf]

  def check_history(self, dest):

    s=self.state
    while s!=None:
      if self.isParent(dest, s.StateID) and not self.hasOrthogonalStateInBetween(dest, s.StateID):
        return 0
      s=s.Next
    return 1

  def getEnabledEvents(self):

    events=EventList()
    if self.isInState(11):
      events.Append("CROSSWALK")
    if self.isInState(2):
      events.Append("ON-OFF")
    if self.isInState(3):
      events.Append("ON-OFF")
    if self.isInState(4):
      events.Append("POLICE")
    if self.isInState(7):
      events.Append("POLICE")
    if self.isInState(3):
      events.Append("QUIT")
    if self.isInState(11):
      events.Append("__INTERNAL_0_TIME_0")
    if self.isInState(8):
      events.Append("__INTERNAL_0_TIME_1")
    if self.isInState(21):
      events.Append("__INTERNAL_0_TIME_10")
    if self.isInState(22):
      events.Append("__INTERNAL_0_TIME_11")
    if self.isInState(14):
      events.Append("__INTERNAL_0_TIME_12")
    if self.isInState(15):
      events.Append("__INTERNAL_0_TIME_13")
    if self.isInState(12):
      events.Append("__INTERNAL_0_TIME_2")
    if self.isInState(10):
      events.Append("__INTERNAL_0_TIME_3")
    if self.isInState(5):
      events.Append("__INTERNAL_0_TIME_4")
    if self.isInState(6):
      events.Append("__INTERNAL_0_TIME_5")
    if self.isInState(17):
      events.Append("__INTERNAL_0_TIME_6")
    if self.isInState(18):
      events.Append("__INTERNAL_0_TIME_7")
    if self.isInState(19):
      events.Append("__INTERNAL_0_TIME_8")
    if self.isInState(20):
      events.Append("__INTERNAL_0_TIME_9")
    return events.Next

  def getHierarchy(self, start_level, state_prefix):

    h=Hierarchy()
    lasth=h
    # Generate state "TrafficLight" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="TrafficLight"
    if state_prefix==None:
      lasth.Next.PathName="TrafficLight"
    else:
      lasth.Next.PathName=state_prefix+".TrafficLight"
    lasth.Next.StateNum=0
    lasth.Next.Level=start_level+0
    lasth=lasth.Next
    # Generate state "TrafficLight.DEAD" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="DEAD"
    if state_prefix==None:
      lasth.Next.PathName="TrafficLight.DEAD"
    else:
      lasth.Next.PathName=state_prefix+".TrafficLight.DEAD"
    lasth.Next.StateNum=1
    lasth.Next.Level=start_level+1
    lasth=lasth.Next
    # Generate state "TrafficLight.OFF" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="OFF"
    if state_prefix==None:
      lasth.Next.PathName="TrafficLight.OFF"
    else:
      lasth.Next.PathName=state_prefix+".TrafficLight.OFF"
    lasth.Next.StateNum=2
    lasth.Next.Level=start_level+1
    lasth=lasth.Next
    # Generate state "TrafficLight.ON" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="ON"
    if state_prefix==None:
      lasth.Next.PathName="TrafficLight.ON"
    else:
      lasth.Next.PathName=state_prefix+".TrafficLight.ON"
    lasth.Next.StateNum=3
    lasth.Next.Level=start_level+1
    lasth=lasth.Next
    # Generate state "TrafficLight.ON.FLASHING" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="FLASHING"
    if state_prefix==None:
      lasth.Next.PathName="TrafficLight.ON.FLASHING"
    else:
      lasth.Next.PathName=state_prefix+".TrafficLight.ON.FLASHING"
    lasth.Next.StateNum=4
    lasth.Next.Level=start_level+2
    lasth=lasth.Next
    # Generate state "TrafficLight.ON.FLASHING.YELLOW_OFF" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="YELLOW_OFF"
    if state_prefix==None:
      lasth.Next.PathName="TrafficLight.ON.FLASHING.YELLOW_OFF"
    else:
      lasth.Next.PathName=state_prefix+".TrafficLight.ON.FLASHING.YELLOW_OFF"
    lasth.Next.StateNum=5
    lasth.Next.Level=start_level+3
    lasth=lasth.Next
    # Generate state "TrafficLight.ON.FLASHING.YELLOW_ON" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="YELLOW_ON"
    if state_prefix==None:
      lasth.Next.PathName="TrafficLight.ON.FLASHING.YELLOW_ON"
    else:
      lasth.Next.PathName=state_prefix+".TrafficLight.ON.FLASHING.YELLOW_ON"
    lasth.Next.StateNum=6
    lasth.Next.Level=start_level+3
    lasth=lasth.Next
    # Generate state "TrafficLight.ON.NORMAL" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="NORMAL"
    if state_prefix==None:
      lasth.Next.PathName="TrafficLight.ON.NORMAL"
    else:
      lasth.Next.PathName=state_prefix+".TrafficLight.ON.NORMAL"
    lasth.Next.StateNum=7
    lasth.Next.Level=start_level+2
    lasth=lasth.Next
    # Generate state "TrafficLight.ON.NORMAL.GREEN" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="GREEN"
    if state_prefix==None:
      lasth.Next.PathName="TrafficLight.ON.NORMAL.GREEN"
    else:
      lasth.Next.PathName=state_prefix+".TrafficLight.ON.NORMAL.GREEN"
    lasth.Next.StateNum=8
    lasth.Next.Level=start_level+3
    lasth=lasth.Next
    # Generate state "TrafficLight.ON.NORMAL.RED" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="RED"
    if state_prefix==None:
      lasth.Next.PathName="TrafficLight.ON.NORMAL.RED"
    else:
      lasth.Next.PathName=state_prefix+".TrafficLight.ON.NORMAL.RED"
    lasth.Next.StateNum=9
    lasth.Next.Level=start_level+3
    lasth=lasth.Next
    # Generate state "TrafficLight.ON.NORMAL.RED.GREEN_SOON" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="GREEN_SOON"
    if state_prefix==None:
      lasth.Next.PathName="TrafficLight.ON.NORMAL.RED.GREEN_SOON"
    else:
      lasth.Next.PathName=state_prefix+".TrafficLight.ON.NORMAL.RED.GREEN_SOON"
    lasth.Next.StateNum=10
    lasth.Next.Level=start_level+4
    lasth=lasth.Next
    # Generate state "TrafficLight.ON.NORMAL.RED.RED_WAIT" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="RED_WAIT"
    if state_prefix==None:
      lasth.Next.PathName="TrafficLight.ON.NORMAL.RED.RED_WAIT"
    else:
      lasth.Next.PathName=state_prefix+".TrafficLight.ON.NORMAL.RED.RED_WAIT"
    lasth.Next.StateNum=11
    lasth.Next.Level=start_level+4
    lasth=lasth.Next
    # Generate state "TrafficLight.ON.NORMAL.YELLOW" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="YELLOW"
    if state_prefix==None:
      lasth.Next.PathName="TrafficLight.ON.NORMAL.YELLOW"
    else:
      lasth.Next.PathName=state_prefix+".TrafficLight.ON.NORMAL.YELLOW"
    lasth.Next.StateNum=12
    lasth.Next.Level=start_level+3
    lasth=lasth.Next
    # Generate state "pedestrian" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="pedestrian"
    if state_prefix==None:
      lasth.Next.PathName="pedestrian"
    else:
      lasth.Next.PathName=state_prefix+".pedestrian"
    lasth.Next.StateNum=13
    lasth.Next.Level=start_level+0
    lasth=lasth.Next
    # Generate state "pedestrian.idle" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="idle"
    if state_prefix==None:
      lasth.Next.PathName="pedestrian.idle"
    else:
      lasth.Next.PathName=state_prefix+".pedestrian.idle"
    lasth.Next.StateNum=14
    lasth.Next.Level=start_level+1
    lasth=lasth.Next
    # Generate state "pedestrian.pressed" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="pressed"
    if state_prefix==None:
      lasth.Next.PathName="pedestrian.pressed"
    else:
      lasth.Next.PathName=state_prefix+".pedestrian.pressed"
    lasth.Next.StateNum=15
    lasth.Next.Level=start_level+1
    lasth=lasth.Next
    # Generate state "police" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="police"
    if state_prefix==None:
      lasth.Next.PathName="police"
    else:
      lasth.Next.PathName=state_prefix+".police"
    lasth.Next.StateNum=16
    lasth.Next.Level=start_level+0
    lasth=lasth.Next
    # Generate state "police.u1" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="u1"
    if state_prefix==None:
      lasth.Next.PathName="police.u1"
    else:
      lasth.Next.PathName=state_prefix+".police.u1"
    lasth.Next.StateNum=17
    lasth.Next.Level=start_level+1
    lasth=lasth.Next
    # Generate state "police.u2" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="u2"
    if state_prefix==None:
      lasth.Next.PathName="police.u2"
    else:
      lasth.Next.PathName=state_prefix+".police.u2"
    lasth.Next.StateNum=18
    lasth.Next.Level=start_level+1
    lasth=lasth.Next
    # Generate state "police.u3" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="u3"
    if state_prefix==None:
      lasth.Next.PathName="police.u3"
    else:
      lasth.Next.PathName=state_prefix+".police.u3"
    lasth.Next.StateNum=19
    lasth.Next.Level=start_level+1
    lasth=lasth.Next
    # Generate state "police.u4" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="u4"
    if state_prefix==None:
      lasth.Next.PathName="police.u4"
    else:
      lasth.Next.PathName=state_prefix+".police.u4"
    lasth.Next.StateNum=20
    lasth.Next.Level=start_level+1
    lasth=lasth.Next
    # Generate state "police.u5" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="u5"
    if state_prefix==None:
      lasth.Next.PathName="police.u5"
    else:
      lasth.Next.PathName=state_prefix+".police.u5"
    lasth.Next.StateNum=21
    lasth.Next.Level=start_level+1
    lasth=lasth.Next
    # Generate state "police.u6" in the hierarchy table
    lasth.Next=Hierarchy()
    lasth.Next.StateName="u6"
    if state_prefix==None:
      lasth.Next.PathName="police.u6"
    else:
      lasth.Next.PathName=state_prefix+".police.u6"
    lasth.Next.StateNum=22
    lasth.Next.Level=start_level+1
    lasth=lasth.Next
    return h.Next

  def topLevelHistory(self):

    s=self.state.StateID
    t=self.getParentState(s)
    while t!=-1:
      s=t
      t=self.getParentState(s)
    self.changeState(s, s)

  def runActionCode(self, code_num):

    if code_num==0: # model finalizer
      pass
    elif code_num==1: # model initializer
      pass
    elif code_num==2: # output action(s) of a transition
      self.runCode("eventhandler.event(\"POLICE\", [], None)")
    elif code_num==3: # output action(s) of a transition
      self.runCode("eventhandler.event(\"CROSSWALK\", [], None)")
    elif code_num==4: # output action(s) of a transition
      self.runCode("dump_message(\"Crossing the intersection\")")
    elif code_num==5: # output action(s) of a transition
      self.runCode("eventhandler.event(\"POLICE\", [], None)")
    elif code_num==6: # output action(s) of a transition
      self.runCode("eventhandler.event(\"ON-OFF\", [], None)")
    elif code_num==7: # output action(s) of a transition
      self.runCode("eventhandler.event(\"POLICE\", [], None)")
    elif code_num==8: # output action(s) of a transition
      self.runCode("eventhandler.event(\"ON-OFF\", [], None)")
    elif code_num==9: # enter actions for state "pedestrian.idle"
      # a timed transition
      self.addSchedule(14, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[8], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[8], self)
    elif code_num==10: # enter actions for state "TrafficLight.ON.FLASHING.YELLOW_OFF"
      # a timed transition
      self.addSchedule(5, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[12], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[12], self)
    elif code_num==11: # enter actions for state "pedestrian.pressed"
      # a timed transition
      self.addSchedule(15, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[9], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[9], self)
    elif code_num==12: # enter actions for state "TrafficLight.ON.FLASHING.YELLOW_ON"
      # a timed transition
      self.addSchedule(6, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[13], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[13], self)
    elif code_num==13: # enter actions for state "TrafficLight.ON.NORMAL.YELLOW"
      # a timed transition
      self.addSchedule(12, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[10], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[10], self)
    elif code_num==14: # enter actions for state "TrafficLight.ON.NORMAL.GREEN"
      # a timed transition
      self.addSchedule(8, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[5], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[5], self)
    elif code_num==15: # enter actions for state "TrafficLight.ON.NORMAL.RED.GREEN_SOON"
      # a timed transition
      self.addSchedule(10, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[11], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[11], self)
    elif code_num==16: # enter actions for state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      # a timed transition
      self.addSchedule(11, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[4], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[4], self)
    elif code_num==17: # enter actions for state "police.u6"
      # a timed transition
      self.addSchedule(22, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[7], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[7], self)
    elif code_num==18: # enter actions for state "police.u4"
      # a timed transition
      self.addSchedule(20, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[17], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[17], self)
    elif code_num==19: # enter actions for state "police.u5"
      # a timed transition
      self.addSchedule(21, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[6], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[6], self)
    elif code_num==20: # enter actions for state "police.u2"
      # a timed transition
      self.addSchedule(18, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[15], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[15], self)
    elif code_num==21: # enter actions for state "police.u3"
      # a timed transition
      self.addSchedule(19, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[16], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[16], self)
    elif code_num==22: # enter actions for state "police.u1"
      # a timed transition
      self.addSchedule(17, TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.IntervalTable[14], TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.EventNames[14], self)
    elif code_num==23: # exit actions for state "pedestrian.idle"
      # clean up timed transitions
      self.removeSchedule(14, self)
    elif code_num==24: # exit actions for state "TrafficLight.ON.FLASHING.YELLOW_OFF"
      # clean up timed transitions
      self.removeSchedule(5, self)
    elif code_num==25: # exit actions for state "pedestrian.pressed"
      # clean up timed transitions
      self.removeSchedule(15, self)
    elif code_num==26: # exit actions for state "TrafficLight.ON.FLASHING.YELLOW_ON"
      # clean up timed transitions
      self.removeSchedule(6, self)
    elif code_num==27: # exit actions for state "TrafficLight.ON.NORMAL.YELLOW"
      # clean up timed transitions
      self.removeSchedule(12, self)
    elif code_num==28: # exit actions for state "TrafficLight.ON.NORMAL.GREEN"
      # clean up timed transitions
      self.removeSchedule(8, self)
    elif code_num==29: # exit actions for state "TrafficLight.ON.NORMAL.RED.GREEN_SOON"
      # clean up timed transitions
      self.removeSchedule(10, self)
    elif code_num==30: # exit actions for state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      # clean up timed transitions
      self.removeSchedule(11, self)
    elif code_num==31: # exit actions for state "police.u6"
      # clean up timed transitions
      self.removeSchedule(22, self)
    elif code_num==32: # exit actions for state "police.u4"
      # clean up timed transitions
      self.removeSchedule(20, self)
    elif code_num==33: # exit actions for state "police.u5"
      # clean up timed transitions
      self.removeSchedule(21, self)
    elif code_num==34: # exit actions for state "police.u2"
      # clean up timed transitions
      self.removeSchedule(18, self)
    elif code_num==35: # exit actions for state "police.u3"
      # clean up timed transitions
      self.removeSchedule(19, self)
    elif code_num==36: # exit actions for state "police.u1"
      # clean up timed transitions
      self.removeSchedule(17, self)

  def testCondition(self, cond_num):

    if cond_num==0 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==1 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==2 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==3 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==4 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==5 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==6 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==7 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==8 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==9 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==10 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==11 and \
       eval("(eventhandler.is_in_state(\"TrafficLight.ON.NORMAL.GREEN\", 0))", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==12 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==13 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==14 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==15 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==16 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==17 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==18 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    elif cond_num==19 and \
       eval("(1)", self.DefaultInterpreter.locals):
      return 1
    return 0

  def runEnterActions(self, state):

    if state==14: # enter action(s) for state "pedestrian.idle"
      self.runActionCode(9)
    elif state==5: # enter action(s) for state "TrafficLight.ON.FLASHING.YELLOW_OFF"
      self.runActionCode(10)
    elif state==15: # enter action(s) for state "pedestrian.pressed"
      self.runActionCode(11)
    elif state==6: # enter action(s) for state "TrafficLight.ON.FLASHING.YELLOW_ON"
      self.runActionCode(12)
    elif state==12: # enter action(s) for state "TrafficLight.ON.NORMAL.YELLOW"
      self.runActionCode(13)
    elif state==8: # enter action(s) for state "TrafficLight.ON.NORMAL.GREEN"
      self.runActionCode(14)
    elif state==10: # enter action(s) for state "TrafficLight.ON.NORMAL.RED.GREEN_SOON"
      self.runActionCode(15)
    elif state==11: # enter action(s) for state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      self.runActionCode(16)
    elif state==22: # enter action(s) for state "police.u6"
      self.runActionCode(17)
    elif state==20: # enter action(s) for state "police.u4"
      self.runActionCode(18)
    elif state==21: # enter action(s) for state "police.u5"
      self.runActionCode(19)
    elif state==18: # enter action(s) for state "police.u2"
      self.runActionCode(20)
    elif state==19: # enter action(s) for state "police.u3"
      self.runActionCode(21)
    elif state==17: # enter action(s) for state "police.u1"
      self.runActionCode(22)

  def runExitActions(self, state):

    if state==14: # exit action(s) for state "pedestrian.idle"
      self.runActionCode(23)
    elif state==5: # exit action(s) for state "TrafficLight.ON.FLASHING.YELLOW_OFF"
      self.runActionCode(24)
    elif state==15: # exit action(s) for state "pedestrian.pressed"
      self.runActionCode(25)
    elif state==6: # exit action(s) for state "TrafficLight.ON.FLASHING.YELLOW_ON"
      self.runActionCode(26)
    elif state==12: # exit action(s) for state "TrafficLight.ON.NORMAL.YELLOW"
      self.runActionCode(27)
    elif state==8: # exit action(s) for state "TrafficLight.ON.NORMAL.GREEN"
      self.runActionCode(28)
    elif state==10: # exit action(s) for state "TrafficLight.ON.NORMAL.RED.GREEN_SOON"
      self.runActionCode(29)
    elif state==11: # exit action(s) for state "TrafficLight.ON.NORMAL.RED.RED_WAIT"
      self.runActionCode(30)
    elif state==22: # exit action(s) for state "police.u6"
      self.runActionCode(31)
    elif state==20: # exit action(s) for state "police.u4"
      self.runActionCode(32)
    elif state==21: # exit action(s) for state "police.u5"
      self.runActionCode(33)
    elif state==18: # exit action(s) for state "police.u2"
      self.runActionCode(34)
    elif state==19: # exit action(s) for state "police.u3"
      self.runActionCode(35)
    elif state==17: # exit action(s) for state "police.u1"
      self.runActionCode(36)

  def compareSchedule(self, sched_a, sched_b):

    return cmp(sched_a[1], sched_b[1])

  def addSchedule(self, id, interval, event, scheduler):

    if self.Parent!=None:  # Non-top-level model
      self.Parent.addSchedule(id, interval, event, scheduler)
      return
    f=eval(interval, self.DefaultInterpreter.locals)
    ##self.SchedulerCond.acquire()
    t=time.time()+f
    s=[id, t, interval, event, scheduler]
    self.Schedules.append(s)
    self.Schedules.sort(self.compareSchedule)
    ##self.SchedulerCond.notify()
    ##self.SchedulerCond.release()

  def removeSchedule(self, id, scheduler):

    if self.Parent!=None:  # Non-top-level model
      self.Parent.removeSchedule(id, scheduler)
      return
    ##self.SchedulerCond.acquire()
    i=0
    while i<len(self.Schedules):
      if self.Schedules[i][0]==id and self.Schedules[i][4]==scheduler:
        del self.Schedules[i]
      else:
        i=i+1
    ##self.SchedulerCond.release()

  def scheduler(self):

    if( not self.Schedules): return

    while( self.Schedules and self.Schedules[0][1]<=time.time()):
      this_sched=self.Schedules[0]
      del self.Schedules[0]
      self.event(this_sched[3], [], None, this_sched[4])

    if self.Schedules:
      t=self.Schedules[0][1]-time.time()

  def recordAllEnteredStates(self):

    st=self.state
    while st!=None:
      self.recordEnteredState(st.StateID, 1, 1)
      st=st.Next

  def recordEnteredState(self, s, superstates=0, submodel=0, commonstate=-1):

    # test if s is already recorded
    se=self.StatesEntered
    found=0
    while se!=None:
      if se.int==s:
        found=1
        break
      se=se.Next

    if not found:
      if superstates:
        parent=self.getParentState(s)
        if parent>=0 and parent!=commonstate:
          self.recordEnteredState(parent, 1, 0, commonstate)
      st=IntList()
      st.Next=self.StatesEntered
      st.int=s
      self.StatesEntered=st
      if submodel and self.Submodels[s]:
        self.Submodels[s].recordAllEnteredStates()

  def runAllEnterActions(self):

    self.runEnterActionsForStates(self.StatesEntered, 1)

  def runEnterActionsForStates(self, states, recursive=0):

    if states:
      self.runEnterActionsForStates(states.Next, 0)
      self.runEnterActions(states.int)
    if recursive:
      for s in self.Submodels:
        if s:
          s.runAllEnterActions()

  def runExitActionsForStates(self, common_state):

    substates=self.getSubstates(common_state)
    if substates==None:
      s=self.state
      while s!=None and s.StateID!=common_state:
        s=s.Next
      if s!=None and self.Submodels[s.StateID]:
        self.Submodels[s.StateID].runExitActionsForStates(-1)
      return s!=None
    else:
      has_current_substate=0
      while substates!=None:
        res=self.runExitActionsForStates(substates.int)
        has_current_substate=has_current_substate or res
        if res:
          self.runExitActions(substates.int)
        substates=substates.Next
      return has_current_substate

  def runInitializer(self):

    self.runActionCode(1)
    for s in self.Submodels:
      if s:
        s.runInitializer()

  def runFinalizer(self):

    if self.Started:
      self.Started=0
      for s in self.Submodels:
        if s:
          s.runFinalizer()
      self.runActionCode(0)
      if self.Parent==None:  # Top-level model
        ##self.EventsCond.acquire()
        ##self.SchedulerCond.acquire()
        self.Stopped=1
        ##self.EventsCond.notify()
        ##self.SchedulerCond.notify()
        ##self.SchedulerCond.release()
        ##self.EventsCond.release()
      else:
        self.Stopped=1

  def clearEnteredStates(self):

    self.StatesEntered=None
    for s in self.Submodels:
      if s:
        s.clearEnteredStates()

  def get_current_state(self):

    return self.getCurrentState()

  def runCode(self, c):

    self.DefaultInterpreter.runsource(c+"\n", "<input>", "exec")

  def setupInterpreter(self):

    self.DefaultInterpreter.locals["eventhandler"]=self
    self.DefaultInterpreter.locals["dump_message"]=self.dump_message

  def get_event_params(self):

    return self.params

  def dump_message(self, msg):

    print msg

  def is_in_state(self, s, check_substate=1):

    return self.isInState(s, check_substate)

  def start(self, lock=None, run_enter_actions=1, TkInstance = None):

    if self.Parent==None:  # Top-level model
      if run_enter_actions:
        self.runEnterActionsForStates(self.StatesEntered, 1)
      self.Started=1
      
      if( TkInstance ):
        self.sleepMethod = TkInstance.after 
        startTkMainloop = False
      else:
        import Tkinter
        TkInstance = Tkinter.Tk()
        self.sleepMethod = TkInstance.after 
        startTkMainloop = True
      
      self.pollingStation() 
      ##thread.start_new_thread(self.handleEvent_wrapper, ())
      ##thread.start_new_thread(self.scheduler, ())
      ## if lock:
        ## lock.release()
    else:
      self.Started=1
    for submodel in self.Submodels:
      if submodel!=None:
        submodel.start()

    if( self.Parent==None and startTkMainloop == None ): TkInstance.mainloop()

  def pollingStation(self):

    self.sleepMethod( 100, self.pollingStation )
    if self.Stopped: return 
    #self.handleEvent_wrapper()
    self.scheduler()
    #todo: pollingStation\,
  def shutdown(self):

    pass

  def handleEvent_wrapper(self):

    if( self.PendingEvents==None ): return
    event=self.PendingEvents
    self.PendingEvents=self.PendingEvents.Next
    if self.PendingEvents==None:
      self.PendingEventsTail=None
    event.next=None
    self.handleEvent(event.Event[0], event.Event[1], event.Event[2], event.Event[3])
    self.handleEvent_wrapper()

  def event(self, e, params=[], cond=None, scheduler=None):

    ev=EventList()
    ev.Event=[e, params, cond, scheduler]
    if self.PendingEventsTail!=None:
      self.PendingEventsTail.Next=ev
    else:
      self.PendingEvents=ev
    self.PendingEventsTail=ev
    self.handleEvent_wrapper()


# main
if __name__=="__main__":
  TrafficLight_and_EnvironmentBehaviour_DCharts_mdl.main(sys.argv)